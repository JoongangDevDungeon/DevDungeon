<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.team.devdungeon.dao.CSJDAO">
    <select id="boardList" parameterType="com.team.devdungeon.dto.CSJshowDTO" resultType="HashMap">
        SELECT *
        FROM boardview
        <if test="searchType != null">
			WHERE
			<choose>
				<when test="searchType == 'title'">board_title</when>
				<when test="searchType == 'writer'">member_no</when>
			</choose>
			LIKE CONCAT('%', #{searchValue }, '%')
        </if>
        ORDER BY board_no DESC
    </select>
 
    <select id="detail" parameterType="Integer" resultType="HashMap">
    	SELECT *
    	FROM boardview
    	WHERE board_no=#{bno}
    </select>
    <select id="memberProfile" parameterType="Integer" resultType="HashMap">
    	SELECT *
    	FROM member
    	WHERE member_no=#{member_no}
    </select>
    <select id="commentList" parameterType="Integer" resultType="HashMap">
    	SELECT *
    	FROM commentview
    	WHERE board_no=#{bno}
    	ORDER BY comment_root
    </select>
    
    <update id="likethis" parameterType="Integer">
    	UPDATE board
    	SET
    	board_like = board_like+1
    	WHERE board_no = #{bno}
    </update>
    
    <update id="deleteByUser" parameterType="Integer">
    	UPDATE board
    	SET
    	status_no = 2
    	WHERE board_no = #{bno}
    </update>
</mapper>