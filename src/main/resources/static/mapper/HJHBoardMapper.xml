<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.team.devdungeon.dao.HJHBoardDAO">
    <select id="boardList"  parameterType="Integer"  resultType="HashMap">
        SELECT board_no,member_name,board_title,member_no,board_date,board_like,board_read, bno
        FROM boardview
        <if test="searchType != null">
			WHERE
			<choose>
				<when test="searchType == 'title'">board_title</when>
				<when test="searchType == 'writer'">member_no</when>
			</choose>
			LIKE CONCAT('%', #{searchValue }, '%')
        </if>
        ORDER BY board_no DESC
        LIMIT #{startPage}, 10
    </select>
    <select id="boardCount" parameterType="HashMap" resultType="Integer">
        SELECT COUNT(*)
        FROM boardview
         <if test="searchType != null">
			WHERE
			<choose>
				<when test="searchType == 'title'">board_title</when>
				<when test="searchType == 'writer'">member_no</when>
			</choose>
			LIKE CONCAT('%', #{searchValue }, '%')
        </if>
    </select>
    <select id="boardDetail" parameterType="String" resultType="HashMap">
  		SELECT board_no,member_name,board_title,member_no,board_date,board_like,board_read,board_content
  		FROM boardview
  		WHERE board_no = #{board_no}
    
    </select>
    <select id="detailComment" parameterType="String" resultType="HashMap">
    	SELECT comment_no,board_no,comment_writer,comment_depth,comment_root,comment_time,member_name,comment_content
    	FROM commentview
    	WHERE board_no=${ board_no }
    	ORDER BY comment_root DESC;
    </select>
    
</mapper>